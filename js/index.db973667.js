(function(e){function t(t){for(var n,i,c=t[0],l=t[1],s=t[2],p=0,u=[];p<c.length;p++)i=c[p],Object.prototype.hasOwnProperty.call(a,i)&&a[i]&&u.push(a[i][0]),a[i]=0;for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(e[n]=l[n]);d&&d(t);while(u.length)u.shift()();return r.push.apply(r,s||[]),o()}function o(){for(var e,t=0;t<r.length;t++){for(var o=r[t],n=!0,c=1;c<o.length;c++){var l=o[c];0!==a[l]&&(n=!1)}n&&(r.splice(t--,1),e=i(i.s=o[0]))}return e}var n={},a={index:0},r=[];function i(t){if(n[t])return n[t].exports;var o=n[t]={i:t,l:!1,exports:{}};return e[t].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=n,i.d=function(e,t,o){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},i.r=function(e){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"===typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(i.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(o,n,function(t){return e[t]}.bind(null,n));return o},i.n=function(e){var t=e&&e.__esModule?function(){return e["default"]}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="";var c=window["webpackJsonp"]=window["webpackJsonp"]||[],l=c.push.bind(c);c.push=t,c=c.slice();for(var s=0;s<c.length;s++)t(c[s]);var d=l;r.push([0,"chunk-vendors"]),o()})({0:function(e,t,o){e.exports=o("cd49")},"38df":function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,'/*!\n * Bootstrap Reboot v4.4.1 (https://getbootstrap.com/)\n * Copyright 2011-2019 The Bootstrap Authors\n * Copyright 2011-2019 Twitter, Inc.\n * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)\n * Forked from Normalize.css, licensed MIT (https://github.com/necolas/normalize.css/blob/master/LICENSE.md)\n */*,:after,:before{box-sizing:border-box}html{font-family:sans-serif;line-height:1.15;-webkit-text-size-adjust:100%;-webkit-tap-highlight-color:transparent}article,aside,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}body{margin:0;font-family:-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica Neue,Arial,Noto Sans,sans-serif,Apple Color Emoji,Segoe UI Emoji,Segoe UI Symbol,Noto Color Emoji;font-size:1rem;font-weight:400;line-height:1.5;color:#212529;text-align:left;background-color:#fff}[tabindex="-1"]:focus:not(:focus-visible){outline:0!important}hr{box-sizing:content-box;height:0;overflow:visible}h1,h2,h3,h4,h5,h6{margin-top:0;margin-bottom:.5rem}p{margin-top:0;margin-bottom:1rem}abbr[data-original-title],abbr[title]{text-decoration:underline;-webkit-text-decoration:underline dotted;text-decoration:underline dotted;cursor:help;border-bottom:0;-webkit-text-decoration-skip-ink:none;text-decoration-skip-ink:none}address{font-style:normal;line-height:inherit}address,dl,ol,ul{margin-bottom:1rem}dl,ol,ul{margin-top:0}ol ol,ol ul,ul ol,ul ul{margin-bottom:0}dt{font-weight:700}dd{margin-bottom:.5rem;margin-left:0}blockquote{margin:0 0 1rem}b,strong{font-weight:bolder}small{font-size:80%}sub,sup{position:relative;font-size:75%;line-height:0;vertical-align:baseline}sub{bottom:-.25em}sup{top:-.5em}a{color:#007bff;text-decoration:none;background-color:transparent}a:hover{color:#0056b3;text-decoration:underline}a:not([href]),a:not([href]):hover{color:inherit;text-decoration:none}code,kbd,pre,samp{font-family:SFMono-Regular,Menlo,Monaco,Consolas,Liberation Mono,Courier New,monospace;font-size:1em}pre{margin-top:0;margin-bottom:1rem;overflow:auto}figure{margin:0 0 1rem}img{border-style:none}img,svg{vertical-align:middle}svg{overflow:hidden}table{border-collapse:collapse}caption{padding-top:.75rem;padding-bottom:.75rem;color:#6c757d;text-align:left;caption-side:bottom}th{text-align:inherit}label{display:inline-block;margin-bottom:.5rem}button{border-radius:0}button:focus{outline:1px dotted;outline:5px auto -webkit-focus-ring-color}button,input,optgroup,select,textarea{margin:0;font-family:inherit;font-size:inherit;line-height:inherit}button,input{overflow:visible}button,select{text-transform:none}select{word-wrap:normal}[type=button],[type=reset],[type=submit],button{-webkit-appearance:button}[type=button]:not(:disabled),[type=reset]:not(:disabled),[type=submit]:not(:disabled),button:not(:disabled){cursor:pointer}[type=button]::-moz-focus-inner,[type=reset]::-moz-focus-inner,[type=submit]::-moz-focus-inner,button::-moz-focus-inner{padding:0;border-style:none}input[type=checkbox],input[type=radio]{box-sizing:border-box;padding:0}input[type=date],input[type=datetime-local],input[type=month],input[type=time]{-webkit-appearance:listbox}textarea{overflow:auto;resize:vertical}fieldset{min-width:0;padding:0;margin:0;border:0}legend{display:block;width:100%;max-width:100%;padding:0;margin-bottom:.5rem;font-size:1.5rem;line-height:inherit;color:inherit;white-space:normal}progress{vertical-align:baseline}[type=number]::-webkit-inner-spin-button,[type=number]::-webkit-outer-spin-button{height:auto}[type=search]{outline-offset:-2px;-webkit-appearance:none}[type=search]::-webkit-search-decoration{-webkit-appearance:none}::-webkit-file-upload-button{font:inherit;-webkit-appearance:button}output{display:inline-block}summary{display:list-item;cursor:pointer}template{display:none}[hidden]{display:none!important}',""]),e.exports=t},a24a:function(e,t,o){var n=o("b461");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("499e").default;a("10a9b7d8",n,!0,{sourceMap:!1,shadowMode:!1})},b461:function(e,t,o){var n=o("24fb");t=n(!1),t.push([e.i,":focus{outline:none!important}body,html{width:100%;margin:0;padding:0;font-size:16px;font-weight:400;font-family:Noto Sans TC,Helvetica Neue,PingFang TC,Heiti TC,Adobe 繁黑體 Std,AdobeFanHeitiStd-Bold,微軟正黑體,sans-serif;line-height:1.75;background-color:#ececec}.scale-enter-active,.scale-leave-active{transition:all .2s ease-in-out}.scale-enter-from,.scale-leave-to{transform:scale(1.05)}.loading{position:fixed;-webkit-overflow-scrolling:touch;top:0;left:0;z-index:9999;display:flex;align-items:center;justify-content:center;width:100vw;height:100vh;padding:5vw;color:#fff;background-color:rgba(0,0,0,.85);transition:all .2s ease-in-out}.loading i{transform:scale(var(--ggs,2))}.loading__message{display:flex;align-items:center;justify-content:center;min-width:250px;min-height:150px;padding:5vw;color:#e80012;font-size:1.2rem;font-weight:700;line-height:1.5;border-radius:1rem;background-color:#fff}#map{width:100%;height:100vh}.icon{color:#1db494;font-size:1.6rem;text-shadow:-2px 0 #fff,0 2px #fff,2px 0 #fff,0 -2px #fff}.leaflet-tooltip{padding:.75rem;background-color:#fff;border:none;border-radius:1rem;color:#000;font-family:Noto Sans TC,Helvetica Neue,PingFang TC,Heiti TC,Adobe 繁黑體 Std,AdobeFanHeitiStd-Bold,微軟正黑體,sans-serif}.leaflet-tooltip .info__content{margin:0 0 .25rem 0;font-size:16px;font-weight:400}.leaflet-tooltip .info__content:last-of-type{margin:0}.footer{position:fixed;-webkit-overflow-scrolling:touch;bottom:.75rem;left:.75rem;z-index:800;max-width:calc(100% - 1.5rem);padding:.75rem;color:#fff;font-size:.65rem;text-align:center;background-color:#0063ff;border-radius:1rem}@media(max-width:575.98px){.footer{bottom:calc(.75rem + 18px)}}.footer__copyright{margin-top:.75rem}.footer .locationSelector{width:100%;padding:.5rem .75rem;color:#181818;font-size:16px;border-radius:1rem;border:none}.footer .locationSelector option{color:#000}.footer .locationSelector option:checked{color:#0063ff;font-weight:500}",""]),e.exports=t},cd49:function(e,t,o){"use strict";o.r(t);o("e260"),o("e6cf"),o("cca6"),o("a79d");var n=o("7a23");o("d434"),o("6cc5"),o("a24a");function a(e,t,o,a,r,i){var c=Object(n["k"])("Map"),l=Object(n["k"])("Copyright");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["g"])(c,{selectedLocation:e.selectedLocation,onMapData:t[1]||(t[1]=function(t){return e.mapData=t})},null,8,["selectedLocation"]),Object(n["g"])(l,{mapData:e.mapData,onSelected:t[2]||(t[2]=function(t){return e.selectedLocation=t})},null,8,["mapData"])],64)}var r=Object(n["g"])("main",{id:"map"},null,-1);function i(e,t,o,a,i,c){var l=Object(n["k"])("Loading");return Object(n["i"])(),Object(n["d"])(n["a"],null,[Object(n["g"])(l,{loading:e.loading,haveMessage:e.haveMessage,message:e.message},null,8,["loading","haveMessage","message"]),r],64)}o("d81d"),o("99af"),o("ac1f"),o("1276"),o("a9e3"),o("4de4"),o("caad"),o("2532"),o("159b");var c=o("bc3a"),l=o.n(c),s=o("e11e"),d=o.n(s),p={key:0,class:"loading"},u={key:0,class:"loading__message"},f={key:1,class:"gg-loadbar-alt"};function m(e,t,o,a,r,i){return e.loading?(Object(n["i"])(),Object(n["d"])("div",p,[Object(n["g"])(n["b"],{name:"scale",mode:"out-in",appear:""},{default:Object(n["n"])((function(){return[e.haveMessage?(Object(n["i"])(),Object(n["d"])("div",u,Object(n["l"])(e.message),1)):(Object(n["i"])(),Object(n["d"])("i",f))]})),_:1})])):Object(n["e"])("",!0)}var b=Object(n["h"])({name:"Loading",props:{loading:{type:Boolean},haveMessage:{type:Boolean},message:{type:String}}});b.render=m;var g=b,h=Object(n["h"])({name:"Map",components:{Loading:g},props:{selectedLocation:{type:String,required:!0}},emits:["mapData"],data:function(){return{mapData:[],markers:[],loading:!1,haveMessage:!1,message:""}},computed:{map:function(){return d.a.map("map",{center:[22.621045,120.311952],zoom:12.5})},icon:function(){return d.a.divIcon({className:"divIcon",html:"<div class='icon'><i class='fas fa-truck-moving'></i></div>",iconSize:[30,42],iconAnchor:[15,42],tooltipAnchor:[10,-20]})}},watch:{selectedLocation:function(){"0"!==this.selectedLocation&&this.showMarker()}},methods:{getTrachCarData:function(){var e=this,t="https://api.kcg.gov.tw/api/service/Get/aaf4ce4b-4ca8-43de-bfaf-6dc97e89cac0";this.loading=!0,l()({method:"get",url:t,headers:{"Content-Type":"application/json"}}).then((function(t){return e.mapData=t.data.data,e.loading=!1,e.$emit("mapData",e.mapData)})).catch((function(t){return e.haveMessage=!0,e.message="高雄市政府提供的 API 服務暫時無法使用，請稍後再試。",console.warn(t)}))},callMap:function(){return d.a.tileLayer("https://{s}.tile.openstreetmap.org/{z}/{x}/{y}.png",{attribution:'&copy; <a href="https://www.openstreetmap.org/copyright">OpenStreetMap</a> contributors'}).addTo(this.map)},setMarker:function(e,t,o,n,a){var r='<p class="info__content">車牌：'.concat(o,'</p><p class="info__content">所在地：').concat(n,'</p><p class="info__content">更新時間：').concat(a.split("T")[1],"</p>");return this.markers.push(d.a.marker([e,t],{icon:this.icon}).bindTooltip(r))},removeMarker:function(){var e=this;return d.a.layerGroup(this.markers).eachLayer((function(t){t.removeFrom(e.map)})),this.markers.length=0},jumpToMap:function(e,t){this.map.flyTo([Number(this.markers[e]._latlng.lat),Number(this.markers[e]._latlng.lng)],t)},showMarker:function(){var e=this,t=this.mapData.filter((function(t){if(null!==t.location)return t.location.includes(e.selectedLocation)}));return this.removeMarker(),t.forEach((function(t){e.setMarker(Number(t.y),Number(t.x),t.car,t.location,t.time)})),d.a.layerGroup(this.markers).addTo(this.map),this.markers.length>1?this.jumpToMap(Math.ceil(this.markers.length/2),14):this.jumpToMap(0,14)}},created:function(){this.getTrachCarData()},mounted:function(){var e=this;this.callMap(),window.setInterval((function(){e.getTrachCarData()}),3e5)}});h.render=i;var v=h,y={class:"footer"},w=Object(n["g"])("option",{value:"0",hidden:""},"請選擇欲查詢的區域",-1),k={class:"footer__copyright"},j=Object(n["f"])(" © 2021"),x={key:0},O=Object(n["f"])(" Design & Coding by ツキノリュウ. ");function M(e,t,o,a,r,i){return Object(n["i"])(),Object(n["d"])("footer",y,[Object(n["o"])(Object(n["g"])("select",{class:"locationSelector",name:"locationSelector","onUpdate:modelValue":t[1]||(t[1]=function(t){return e.selectedLocation=t}),onChange:t[2]||(t[2]=function(t){return e.$emit("selected",e.selectedLocation)})},[w,(Object(n["i"])(!0),Object(n["d"])(n["a"],null,Object(n["j"])(e.trashCarInLocation,(function(e,t){return Object(n["i"])(),Object(n["d"])("option",{value:e,key:t},Object(n["l"])(e),9,["value"])})),128))],544),[[n["m"],e.selectedLocation]]),Object(n["g"])("div",k,[j,2021!==e.currentYear?(Object(n["i"])(),Object(n["d"])("span",x," - "+Object(n["l"])(e.currentYear),1)):Object(n["e"])("",!0),O])])}var _=Object(n["h"])({name:"Copyright",props:{mapData:{type:Array,required:!0}},emits:["selected"],data:function(){return{selectedLocation:"0"}},computed:{trashCarInLocation:function(){for(var e=["鹽埕區","鼓山區","左營區","楠梓區","三民區","新興區","前金區","苓雅區","前鎮區","旗津區","小港區","鳳山區","林園區","大寮區","大樹區","大社區","仁武區","鳥松區","岡山區","橋頭區","燕巢區","田寮區","阿蓮區","路竹區","湖內區","茄萣區","永安區","彌陀區","梓官區","旗山區","美濃區","六龜區","甲仙區","杉林區","內門區","茂林區","桃源區","那瑪夏區"],t=[],o=0;o<e.length;o++)for(var n=e[o],a=0;a<this.mapData.length;a++){var r=this.mapData[a];if(null!==r.location){var i=r.location.includes(n);if(i){t.push(n);break}}}return t},currentYear:function(){return(new Date).getFullYear()}}});_.render=M;var S=_,z=Object(n["h"])({name:"App",components:{Map:v,Copyright:S},data:function(){return{selectedLocation:"0",mapData:[]}}});z.render=a;var C=z;Object(n["c"])(C).mount("#app")},d434:function(e,t,o){var n=o("38df");n.__esModule&&(n=n.default),"string"===typeof n&&(n=[[e.i,n,""]]),n.locals&&(e.exports=n.locals);var a=o("499e").default;a("7fd6d71a",n,!0,{sourceMap:!1,shadowMode:!1})}});